3-way handshake와 4-way handshake는 TCP 프로토콜에서의 연결 수립 및 해제 방식입니다.

먼저 3-way handshake는 세션을 수립하는 과정을 말하며, 목적지와 수신지를 확실히 하여 데이터 전송의 신뢰성을 보장하기 위한 절차입니다. 
이 과정에서 sequence number와 정책(MSS 등의 정보)을 교환하게 되는데, 간단히 요약하자면 client와 server가 각각 랜덤으로 seq number를 생성 후 교환하여 신뢰성을 보장하도록 합니다.
이때 교환하는 segment는 일반적인 segment와 달리 payload 없이 ip헤더와 tcp 헤더만으로 단순 통신이 이루어집니다.

4-way handshaking은 TCP 연결 해제 과정을 말합니다.
먼저, 클라이언트가 연결을 종료를 알리는 FIN 플래그를 전송합니다.
이후 서버는 확인 메시지를 보내고 자신의 통신이 끝날때까지 기다리고, 서버의 통신이 끝나면 연결이 종료되었다고 클라이언트에게 FIN 플래그를 전송합니다.
이후 최종적으로 클라이언트에서 서버로 확인 메시지를 보내어 4-way handshaking이 완료됩니다.

여기에서 예외상황이 발생할 수 있는데, 가령 서버에서 FIN을 전송하기 전에 전송한 패킷이 Routing 지연이나 패킷 유실로 인한 재전송 등으로 인해 FIN 패킷보다 늦게 도착하는 상황 등이 발생할 수 있습니다.
이러한 현상에 대비하여 Client는 Server로부터 FIN을 수신하더라도 일정 시간(240sec default)동안 세션을 남겨놓고 잉여 패킷을 기다리는 과정을 거치게 되는데, 이 과정을 TIME_WAIT 라고 합니다. 

이러한 연결 수립/해제 과정은 UDP와 같은 프로토콜과 달리, 신뢰성이 중요한 TCP 통신에 필수적인 요소라고 할 수 있습니다.
