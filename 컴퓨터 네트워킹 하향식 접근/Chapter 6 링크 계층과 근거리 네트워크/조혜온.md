# 6.4 스위치 근거리 네트워크

## **🔹스위치란?**

- 링크 계층에서 동작하며, 링크 계층 프레임을 교환하는 장치
- IP 주소가 아니라 MAC 주소를 사용하여 데이터를 전달함
- 네트워크 계층의 라우터와 다르게 OSPF 같은 라우팅 알고리즘을 사용하지 않음

## **6.4.1 링크 계층 주소체계와 ARP**

### **🔹 MAC 주소란?**

- **각 네트워크 어댑터에 부여된 고유한 주소(6바이트, 48비트)**.
- **IP 주소와 다르게 위치가 변해도 변경되지 않음** → 주민등록번호 같은 개념.
- IEEE가 MAC 주소를 관리하여 **각 기기의 주소가 중복되지 않도록 보장**.
- 송신 어댑터는 프레임에 **목적지 MAC 주소**를 포함하여 전송함.

### **🔹 ARP**

- **IP 주소를 MAC 주소로 변환하는 프로토콜**.
- 같은 서브넷 내에서 IP 주소를 MAC 주소로 변환해 데이터를 전달할 수 있도록 함.
- **ARP 동작 과정**:
    1. 송신 호스트가 ARP 요청(브로드캐스트 전송) 
    2. 대상 호스트가 ARP 응답(유니캐스트 전송) 
    3. 송신자는 응답을 받아 ARP 테이블에 저장 후 MAC 주소 사용

## **6.4.2 이더넷**

- **가장 널리 사용되는 LAN 기술**.
- 예전에는 **버스 토폴로지**(모든 기기가 같은 케이블 공유)를 사용했지만,→ 지금은 **스위치 기반의 스타 토폴로지**(각 기기가 스위치에 연결) 사용
- **CSMA/CD 방식으로 충돌을 감지하고 해결했으나, 스위치 등장 후 충돌 문제 해결됨**.

### **🔹 이더넷 프레임 구조**

| **필드** | **설명** |
| --- | --- |
| **프리앰블(8바이트)** | 송신·수신 장치 동기화(10101010 패턴) |
| **목적지 MAC 주소(6바이트)** | 수신 장치의 MAC 주소 |
| **출발지 MAC 주소(6바이트)** | 송신 장치의 MAC 주소 |
| **타입(2바이트)** | 상위 계층 프로토콜(IP 등) 구분 |
| **데이터(46~1500바이트)** | 실제 전송 데이터 |
| **CRC(4바이트)** | 오류 검출을 위한 순환 중복 검사 |

## **6.4.3 링크 계층 스위치**

- 브로드캐스트 방식이 아니라 목적지 MAC 주소 기반으로 패킷을 전달.
- 자기 학습기능을 통해 자동으로 스위치 테이블을 구축.

### **🔹 포워딩과 필터링 (스위치 테이블 사용)**

1. 포워딩→ 프레임을 적절한 인터페이스로 전달
2. 필터링→ 불필요한 프레임 제거

### **🔹 스위치 테이블 동작 방식**

1. 스위치는 프레임의 출발지 MAC 주소를 학습하여 스위치 테이블에 저장.
2. 목적지 MAC 주소를 테이블에서 검색:
    - 테이블에 목적지 MAC 주소가 있으면 → 해당 포트로 전달
    - 없으면 → 네트워크 전체에 브로드캐스트

### **🔹 링크 계층 스위치의 장점**

✅ 충돌 없음 → 각 장치가 개별 링크를 사용하므로 충돌 X

✅ 이질적인 네트워크 연결 가능 → 서로 다른 속도, 매체 사용 가능

✅ 보안 및 관리 용이 → 특정 장치의 트래픽 차단, 네트워크 모니터링 가능

## **6.4.4 가상 근거리 네트워크**

### **🔹 VLAN이 필요한 이유**

- 트래픽 격리 부족 → 모든 노드가 브로드캐스트를 받아야 함
- 스위치의 비효율적 사용 → 물리적으로 네트워크를 분리해야 함
- 사용자 관리 어려움 → 그룹 변경 시 케이블 연결 필요

### **🔹 VLAN이란?**

- 물리적 네트워크와 무관하게 논리적으로 네트워크를 분할하는 기술.
- 같은 VLAN에 속한 기기끼리만 통신 가능 (마치 별도 네트워크처럼 동작).
- VLAN을 사용하면 같은 스위치 내에서도 다른 네트워크를 구성할 수 있음.

### **🔹 VLAN의 특징**

✅ 브로드캐스트 도메인 분리 → 성능 향상

✅ 네트워크 관리 유연성 증가 → 물리적 이동 없이 VLAN 변경 가능

✅ 보안 강화 → 특정 그룹 간 통신 제한 가능

### 🔹 VLAN 트렁킹(VLAN Trunking)

- 하나의 포트(트렁크 포트)가 여러 VLAN을 통과하도록 설정하는 방식.
- VLAN 태그(4바이트) 추가하여 어떤 VLAN에서 온 트래픽인지 구분.
- IEEE 802.1Q 표준 사용.

## **스위치 vs 라우터 비교**

| **구분** | **스위치** | **라우터** |
| --- | --- | --- |
| **계층** | 2계층 (MAC 주소 사용) | 3계층 (IP 주소 사용) |
| **주소 체계** | MAC 주소 기반 | IP 주소 기반 |
| **패킷 전달 방식** | LAN 내에서 프레임 전달 | 다른 네트워크 간 패킷 전달 |
| **충돌 방지** | 충돌 없음 | 충돌 없음 |
| **플러그 앤 플레이** | ✅ | ❌ (수동 설정 필요) |
| **브로드캐스트 관리** | 브로드캐스트 증가 가능 | 브로드캐스트 차단 가능 |

## 정리

- 스위치는 링크 계층에서 동작하며, MAC 주소를 기반으로 프레임을 전달함.
- ARP는 IP 주소를 MAC 주소로 변환하는 프로토콜.
- 이더넷은 가장 많이 사용되는 LAN 기술이며, 프레임 구조를 유지하면서 진화해옴.
- 스위치는 충돌이 없고 효율적인 데이터 전송이 가능하지만, 브로드캐스트 트래픽이 증가할 수 있음.
- VLAN을 활용하면 물리적 변경 없이 논리적으로 네트워크를 분리하여 보안과 성능을 향상할 수 있음.
- 스위치와 라우터는 각각의 역할이 다르며, 작은 네트워크는 스위치만으로 충분하지만 대규모 네트워크는 라우터도 필요함.
